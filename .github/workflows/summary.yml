name: "AI Issue Summary"

on:
  issues:
    types: [opened]

jobs:
  summary:
    name: "ğŸ¤– AI Summary"
    runs-on: ubuntu-latest
    permissions:
      issues: write
      contents: read
      # LÆ°u Ã½: Quyá»n 'models' tÃ¹y thuá»™c vÃ o gÃ³i GitHub Models báº¡n Ä‘ang dÃ¹ng
      # Náº¿u dÃ¹ng action máº·c Ä‘á»‹nh thÃ¬ permissions issues: write lÃ  Ä‘á»§.

    steps:
      - name: ğŸšš Checkout repository
        uses: actions/checkout@v4

      - name: ğŸ§  Run AI inference
        id: inference
        # ÄÃ¢y lÃ  Action chÃ­nh thá»©c cá»§a GitHub Ä‘á»ƒ dÃ¹ng AI Models miá»…n phÃ­ (Beta)
        uses: actions/ai-inference@v1
        with:
          # Báº¡n cÃ³ thá»ƒ chá»n model khÃ¡c nhÆ° 'gpt-4o' hoáº·c 'phi-3-mini' tÃ¹y quyá»n truy cáº­p
          model: gemini-2.5 
          prompt: |
            Báº¡n lÃ  má»™t trá»£ lÃ½ áº£o chuyÃªn nghiá»‡p. HÃ£y tÃ³m táº¯t Issue sau Ä‘Ã¢y trong má»™t Ä‘oáº¡n vÄƒn ngáº¯n gá»n (khoáº£ng 2-3 cÃ¢u).
            HÃ£y nÃªu rÃµ má»¥c Ä‘Ã­ch chÃ­nh vÃ  yÃªu cáº§u cá»§a ngÆ°á»i dÃ¹ng.
            
            TiÃªu Ä‘á»: ${{ github.event.issue.title }}
            Ná»™i dung: ${{ github.event.issue.body }}

      - name: ğŸ’¬ Comment with AI summary
        # Sá»­ dá»¥ng GitHub CLI (gh) Ä‘á»ƒ Ä‘Äƒng comment
        run: |
          gh issue comment "$ISSUE_NUMBER" --body "### ğŸ¤– AI Summary
          $RESPONSE"
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          ISSUE_NUMBER: ${{ github.event.issue.number }}
          # Láº¥y káº¿t quáº£ tá»« bÆ°á»›c 'inference' á»Ÿ trÃªn
          RESPONSE: ${{ steps.inference.outputs.response }}
